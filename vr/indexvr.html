<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Treinamentos VR</title>
    <meta name="description" content="Escola Virtual" />

    <script src="../lib/aframe.min.js"></script>
    <script src="../lib/aframe-extras.controls.min.js"></script>
    <script src="../lib/simple-navmesh-constraint.js"></script>

    <script src="https://recast-api.donmccurdy.com/aframe-inspector-plugin-recast.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <script src="./components.js"></script>
    <script src="./controller.js"></script>
    <script src="./handle_trainings.js"></script>
    <script src="./utils.js"></script>

    <div class="page" id="loadingScreen">
      <div class="container text-center">
        <div class="row">
          <div class="col-md-6 align-self-center">
            <img src="../assets/logo.jpeg" id="logo" />
          </div>
          <div class="col-md-6 align-self-center">
            <p class="display-6 fw-bold text-center" style="color: white">
              Carregando...
            </p>
            <div
              class="spinner-border float-center text-light"
              role="status"
            ></div>
          </div>
        </div>
      </div>
    </div>

    <a-scene
      renderer="antialias: true;"
      id="scene"
      inspector-plugin-recast
      style="display: none"
    >
      <a-entity
        environment="skyType: atmosphere; lighting: none; playArea: 1.67; preset: forest; dressing: trees; dressingAmount: 500; ground: none;"
      ></a-entity>

      <a-assets>
        <a-asset-item
          id="scene-gltf"
          src="../assets/models/new_scene.gltf"
          preload="auto"
        ></a-asset-item>

        <a-asset-item
          id="elevator-gltf"
          src="../assets/models/elevator.gltf"
          preload="auto"
        >
        </a-asset-item>
      </a-assets>

      <a-entity
        id="construction_site"
        position="-37 0.0 -28"
        gltf-model="#scene-gltf"
        scale="1.0 1.0 1.0"
      >
      </a-entity>

      <a-entity
        movement-controls="speed: 0.5; camera: #camera;"
        position="15.4 8 3.15"
        rotation="0 30 0"
        id="player"
      >
        <a-entity
          camera="near:0.01;"
          look-controls
          fov="100"
          id="#camera"
          position="0 1 0"
        >
          <a-entity
            id="#hud"
            position="0 0.04 -1.0"
            scale="0.1 0.1 0.1"
            rotation="0 0 0"
            animation-mixer
          >
          </a-entity>
        </a-entity>

        <a-entity
          id="leftController"
          laser-controls="hand: left;"
          grab
          thumbstick-logging-left
        >
          <a-entity
            cursor="fuse: true; fuseTimeout: 500"
            position="0 0 -.1"
            geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
            material="color: gray; shader: flat"
            raycaster="objects: .clicable; showLine: true; far: 100"
            line="color: red; opacity: 0.5;"
          >
          </a-entity>
        </a-entity>

        <a-entity
          id="rightController"
          laser-controls="hand: right;"
          grab
          thumbstick-logging-right
        >
          <a-entity
            cursor="fuse: true; fuseTimeout: 500"
            position="0 0 -.1"
            geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
            material="color: gray; shader: flat"
            raycaster="objects: .clicable; showLine: true; far: 100; lineColor: red; lineOpacity: 0.5"
          >
          </a-entity>
        </a-entity>
      </a-entity>
      <!-- player -->

      <a-entity
        id="elevator"
        position="-37 0.0 -28"
        gltf-model="#elevator-gltf"
        scale="1.0 1.0 1.0"
      >
        <a-box
          clicable
          id="elevatorButtons"
          color="tomato"
          position="49.955 8.814 26.607"
          material="opacity: 0"
          depth="2"
          height="4"
          width="0.5"
          geometry="depth: 0.44; height: 0.19; width: 0.23"
        ></a-box>
      </a-entity>

      <a-entity light="type: ambient; color: #FFF"></a-entity>
      <a-entity
        light="type: directional; color: #FFF; intensity: 0.4"
        position="7.9 2.8 0.0"
      ></a-entity>
      <a-entity
        light="type: directional; color: #FFF; intensity: 0.4"
        position="3.9 2.8 0.0"
      ></a-entity>
      <a-entity
        light="type: directional; color: #FFF; intensity: 0.4"
        position="-2.1 2.8 0.0"
      ></a-entity>

      <a-entity
        light="type: directional; color: #FFF; intensity: 0.4"
        position="6.7 2.8 -5.3"
      ></a-entity>

      <a-entity
        light="type: directional; color: #FFF; intensity: 0.4"
        position="9.0 2.8 5.8"
      ></a-entity>
      <a-entity
        light="type: directional; color: #FFF; intensity: 0.4"
        position="5.2 2.8 5.8"
      ></a-entity>
      <a-entity
        light="type: directional; color: #FFF; intensity: 0.4"
        position="1.9 2.8 5.8"
      ></a-entity>
    </a-scene>
  </body>
</html>

<style>
  .page {
    background-color: #122b49;
    height: 100vh;
    width: 100vw;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 8rem;
  }

  #logo {
    width: 100%;
    height: auto;
  }
</style>
